<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="900" fill="#f5f5f5"/>
  
  <!-- Title -->
  <text x="700" y="35" font-size="26" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Spark + Hadoop Multi-Node Architecture on Docker
  </text>
  
  <!-- Docker Network Container -->
  <rect x="40" y="60" width="1320" height="820" fill="white" stroke="#3498db" stroke-width="3" stroke-dasharray="15,5" rx="10"/>
  <rect x="50" y="70" width="280" height="35" fill="#3498db" rx="5"/>
  <text x="190" y="92" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
    Docker Network: shnetwork
  </text>
  <text x="190" y="125" font-size="13" text-anchor="middle" fill="#3498db">
    Bridge Network (172.25.0.0/16)
  </text>
  
  <!-- HADOOP CLUSTER -->
  <g id="hadoop-cluster">
    <rect x="80" y="150" width="550" height="680" fill="#fff5e6" stroke="#e67e22" stroke-width="2" rx="8"/>
    <rect x="90" y="160" width="200" height="40" fill="#e67e22" rx="5"/>
    <text x="190" y="185" font-size="18" font-weight="bold" text-anchor="middle" fill="white">HADOOP CLUSTER</text>
    
    <!-- NameNode -->
    <g>
      <rect x="110" y="220" width="220" height="130" fill="#ffeaa7" stroke="#fdcb6e" stroke-width="2" rx="5"/>
      <circle cx="130" cy="240" r="8" fill="#27ae60"/>
      <text x="230" y="245" font-size="15" font-weight="bold" text-anchor="middle">NameNode</text>
      <text x="120" y="270" font-size="12" fill="#555">ğŸ“¦ Container: namenode</text>
      <text x="120" y="290" font-size="12" fill="#555">ğŸ”Œ Ports: 9870, 9000</text>
      <text x="120" y="310" font-size="12" fill="#555">ğŸ’¾ HDFS Metadata</text>
      <text x="120" y="330" font-size="12" fill="#555">ğŸŒ IP: 172.25.0.2</text>
    </g>
    
    <!-- DataNode 1 -->
    <g>
      <rect x="360" y="220" width="220" height="130" fill="#dfe6e9" stroke="#b2bec3" stroke-width="2" rx="5"/>
      <circle cx="380" cy="240" r="8" fill="#27ae60"/>
      <text x="480" y="245" font-size="15" font-weight="bold" text-anchor="middle">DataNode 1</text>
      <text x="370" y="270" font-size="12" fill="#555">ğŸ“¦ Container: datanode1</text>
      <text x="370" y="290" font-size="12" fill="#555">ğŸ”Œ Ports: 9864, 50075</text>
      <text x="370" y="310" font-size="12" fill="#555">ğŸ’¾ Block Storage</text>
      <text x="370" y="330" font-size="12" fill="#555">ğŸŒ IP: 172.25.0.3</text>
    </g>
    
    <!-- DataNode 2 -->
    <g>
      <rect x="360" y="370" width="220" height="130" fill="#dfe6e9" stroke="#b2bec3" stroke-width="2" rx="5"/>
      <circle cx="380" cy="390" r="8" fill="#27ae60"/>
      <text x="480" y="395" font-size="15" font-weight="bold" text-anchor="middle">DataNode 2</text>
      <text x="370" y="420" font-size="12" fill="#555">ğŸ“¦ Container: datanode2</text>
      <text x="370" y="440" font-size="12" fill="#555">ğŸ”Œ Ports: 9865, 50076</text>
      <text x="370" y="460" font-size="12" fill="#555">ğŸ’¾ Block Storage</text>
      <text x="370" y="480" font-size="12" fill="#555">ğŸŒ IP: 172.25.0.4</text>
    </g>
    
    <!-- ResourceManager -->
    <g>
      <rect x="110" y="520" width="220" height="130" fill="#a29bfe" stroke="#6c5ce7" stroke-width="2" rx="5"/>
      <circle cx="130" cy="540" r="8" fill="#27ae60"/>
      <text x="230" y="545" font-size="15" font-weight="bold" text-anchor="middle">ResourceManager</text>
      <text x="120" y="570" font-size="12" fill="#555">ğŸ“¦ Container: resourcemanager</text>
      <text x="120" y="590" font-size="12" fill="#555">ğŸ”Œ Port: 8088, 8032</text>
      <text x="120" y="610" font-size="12" fill="#555">âš™ï¸ YARN Scheduler</text>
      <text x="120" y="630" font-size="12" fill="#555">ğŸŒ IP: 172.25.0.5</text>
    </g>
    
    <!-- NodeManager 1 -->
    <g>
      <rect x="360" y="520" width="220" height="130" fill="#74b9ff" stroke="#0984e3" stroke-width="2" rx="5"/>
      <circle cx="380" cy="540" r="8" fill="#27ae60"/>
      <text x="480" y="545" font-size="15" font-weight="bold" text-anchor="middle">NodeManager 1</text>
      <text x="370" y="570" font-size="12" fill="#555">ğŸ“¦ Container: nodemanager1</text>
      <text x="370" y="590" font-size="12" fill="#555">ğŸ”Œ Port: 8042</text>
      <text x="370" y="610" font-size="12" fill="#555">âš™ï¸ Container Executor</text>
      <text x="370" y="630" font-size="12" fill="#555">ğŸŒ IP: 172.25.0.6</text>
    </g>
    
    <!-- NodeManager 2 -->
    <g>
      <rect x="360" y="670" width="220" height="130" fill="#74b9ff" stroke="#0984e3" stroke-width="2" rx="5"/>
      <circle cx="380" cy="690" r="8" fill="#27ae60"/>
      <text x="480" y="695" font-size="15" font-weight="bold" text-anchor="middle">NodeManager 2</text>
      <text x="370" y="720" font-size="12" fill="#555">ğŸ“¦ Container: nodemanager2</text>
      <text x="370" y="740" font-size="12" fill="#555">ğŸ”Œ Port: 8043</text>
      <text x="370" y="760" font-size="12" fill="#555">âš™ï¸ Container Executor</text>
      <text x="370" y="780" font-size="12" fill="#555">ğŸŒ IP: 172.25.0.7</text>
    </g>
  </g>
  
  <!-- SPARK CLUSTER -->
  <g id="spark-cluster">
    <rect x="680" y="150" width="550" height="530" fill="#ffe6e6" stroke="#e74c3c" stroke-width="2" rx="8"/>
    <rect x="690" y="160" width="180" height="40" fill="#e74c3c" rx="5"/>
    <text x="780" y="185" font-size="18" font-weight="bold" text-anchor="middle" fill="white">SPARK CLUSTER</text>
    
    <!-- Spark Master -->
    <g>
      <rect x="710" y="220" width="220" height="130" fill="#fab1a0" stroke="#e17055" stroke-width="2" rx="5"/>
      <circle cx="730" cy="240" r="8" fill="#27ae60"/>
      <text x="830" y="245" font-size="15" font-weight="bold" text-anchor="middle">Spark Master</text>
      <text x="720" y="270" font-size="12" fill="#555">ğŸ“¦ Container: spark-master</text>
      <text x="720" y="290" font-size="12" fill="#555">ğŸ”Œ Ports: 8080, 7077</text>
      <text x="720" y="310" font-size="12" fill="#555">ğŸ¯ Cluster Manager</text>
      <text x="720" y="330" font-size="12" fill="#555">ğŸ“Š Web UI: 8080</text>
    </g>
    
    <!-- Spark Worker 1 -->
    <g>
      <rect x="960" y="220" width="220" height="130" fill="#ffeaa7" stroke="#fdcb6e" stroke-width="2" rx="5"/>
      <circle cx="980" cy="240" r="8" fill="#27ae60"/>
      <text x="1080" y="245" font-size="15" font-weight="bold" text-anchor="middle">Spark Worker 1</text>
      <text x="970" y="270" font-size="12" fill="#555">ğŸ“¦ Container: spark-worker1</text>
      <text x="970" y="290" font-size="12" fill="#555">ğŸ”Œ Port: 8081</text>
      <text x="970" y="310" font-size="12" fill="#555">ğŸ’» Executors: 2 cores</text>
      <text x="970" y="330" font-size="12" fill="#555">ğŸ’¾ Memory: 2GB</text>
    </g>
    
    <!-- Spark Worker 2 -->
    <g>
      <rect x="960" y="370" width="220" height="130" fill="#ffeaa7" stroke="#fdcb6e" stroke-width="2" rx="5"/>
      <circle cx="980" cy="390" r="8" fill="#27ae60"/>
      <text x="1080" y="395" font-size="15" font-weight="bold" text-anchor="middle">Spark Worker 2</text>
      <text x="970" y="420" font-size="12" fill="#555">ğŸ“¦ Container: spark-worker2</text>
      <text x="970" y="440" font-size="12" fill="#555">ğŸ”Œ Port: 8082</text>
      <text x="970" y="460" font-size="12" fill="#555">ğŸ’» Executors: 2 cores</text>
      <text x="970" y="480" font-size="12" fill="#555">ğŸ’¾ Memory: 2GB</text>
    </g>
    
    <!-- Jupyter PySpark -->
    <g>
      <rect x="710" y="520" width="470" height="130" fill="#dfe4ea" stroke="#57606f" stroke-width="2" rx="5"/>
      <circle cx="730" cy="540" r="8" fill="#27ae60"/>
      <text x="945" y="545" font-size="15" font-weight="bold" text-anchor="middle">Jupyter PySpark</text>
      <text x="720" y="570" font-size="12" fill="#555">ğŸ“¦ Container: jupyter-pyspark</text>
      <text x="720" y="590" font-size="12" fill="#555">ğŸ”Œ Port: 8888 (Notebook)</text>
      <text x="720" y="610" font-size="12" fill="#555">ğŸ““ Interactive Development</text>
      <text x="720" y="630" font-size="12" fill="#555">ğŸ PySpark Driver</text>
    </g>
  </g>
  
  <!-- HOST MACHINE -->
  <g>
    <rect x="1270" y="150" width="100" height="530" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" rx="8"/>
    <text x="1320" y="175" font-size="14" font-weight="bold" text-anchor="middle">HOST</text>
    <text x="1320" y="195" font-size="14" font-weight="bold" text-anchor="middle">MACHINE</text>
    
    <!-- Browser -->
    <rect x="1280" y="220" width="80" height="60" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="5"/>
    <text x="1320" y="245" font-size="12" text-anchor="middle" fill="white">Browser</text>
    <text x="1320" y="265" font-size="10" text-anchor="middle" fill="white">Web UIs</text>
    
    <!-- IDE -->
    <rect x="1280" y="300" width="80" height="60" fill="#9b59b6" stroke="#8e44ad" stroke-width="1" rx="5"/>
    <text x="1320" y="325" font-size="12" text-anchor="middle" fill="white">IDE</text>
    <text x="1320" y="345" font-size="10" text-anchor="middle" fill="white">PySpark</text>
    
    <!-- Terminal -->
    <rect x="1280" y="380" width="80" height="60" fill="#2c3e50" stroke="#34495e" stroke-width="1" rx="5"/>
    <text x="1320" y="405" font-size="12" text-anchor="middle" fill="white">Terminal</text>
    <text x="1320" y="425" font-size="10" text-anchor="middle" fill="white">Docker</text>
  </g>
  
  <!-- CONNECTIONS -->
  <!-- HDFS Communication -->
  <g stroke="#e67e22" stroke-width="2" fill="none">
    <!-- NameNode to DataNodes -->
    <path d="M 330 285 L 360 285" marker-end="url(#arrowOrange)"/>
    <path d="M 330 285 L 360 435" marker-end="url(#arrowOrange)"/>
    <text x="340" y="280" font-size="11" fill="#e67e22">HDFS Protocol</text>
  </g>
  
  <!-- YARN Communication -->
  <g stroke="#6c5ce7" stroke-width="2" fill="none">
    <!-- ResourceManager to NodeManagers -->
    <path d="M 330 585 L 360 585" marker-end="url(#arrowPurple)"/>
    <path d="M 330 585 L 360 735" marker-end="url(#arrowPurple)"/>
    <text x="340" y="580" font-size="11" fill="#6c5ce7">YARN</text>
  </g>
  
  <!-- Spark Internal -->
  <g stroke="#e74c3c" stroke-width="2" fill="none">
    <!-- Master to Workers -->
    <path d="M 930 285 L 960 285" marker-end="url(#arrowRed)"/>
    <path d="M 930 285 L 960 435" marker-end="url(#arrowRed)"/>
    <text x="935" y="280" font-size="11" fill="#e74c3c">Spark RPC</text>
  </g>
  
  <!-- Spark to Hadoop -->
  <g stroke="#27ae60" stroke-width="3" fill="none">
    <!-- Spark to HDFS -->
    <path d="M 710 285 Q 650 285 330 285" marker-end="url(#arrowGreen)" stroke-dasharray="5,3"/>
    <text x="500" y="280" font-size="12" fill="#27ae60" font-weight="bold">HDFS Read/Write</text>
    
    <!-- Spark to YARN -->
    <path d="M 710 585 Q 650 585 330 585" marker-end="url(#arrowGreen)" stroke-dasharray="5,3"/>
    <text x="500" y="580" font-size="12" fill="#27ae60" font-weight="bold">YARN Submit</text>
  </g>
  
  <!-- Host to Services -->
  <g stroke="#34495e" stroke-width="1" fill="none" stroke-dasharray="3,2">
    <!-- Browser to Web UIs -->
    <path d="M 1280 250 L 930 250"/>
    <path d="M 1280 250 L 330 250"/>
    <text x="1100" y="245" font-size="10" fill="#34495e">HTTP</text>
    
    <!-- IDE to Spark -->
    <path d="M 1280 330 L 930 330"/>
    <text x="1100" y="325" font-size="10" fill="#34495e">Port 7077</text>
    
    <!-- Terminal to Docker -->
    <path d="M 1280 410 L 630 410"/>
    <text x="950" y="405" font-size="10" fill="#34495e">Docker CLI</text>
  </g>
  
  <!-- Arrow Markers -->
  <defs>
    <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#e67e22"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#6c5ce7"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#e74c3c"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#27ae60"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <g>
    <rect x="80" y="850" width="1150" height="35" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="5"/>
    <text x="100" y="872" font-size="14" font-weight="bold">Legend:</text>
    
    <circle cx="200" cy="867" r="6" fill="#27ae60"/>
    <text x="215" y="872" font-size="12">Running</text>
    
    <line x1="300" y1="867" x2="330" y2="867" stroke="#27ae60" stroke-width="3"/>
    <text x="340" y="872" font-size="12">Cross-cluster Communication</text>
    
    <line x1="500" y1="867" x2="530" y2="867" stroke="#e67e22" stroke-width="2"/>
    <text x="540" y="872" font-size="12">Internal Communication</text>
    
    <line x1="700" y1="867" x2="730" y2="867" stroke="#34495e" stroke-width="1" stroke-dasharray="3,2"/>
    <text x="740" y="872" font-size="12">External Access</text>
    
    <text x="900" y="872" font-size="12">ğŸ”Œ Port</text>
    <text x="970" y="872" font-size="12">ğŸ’¾ Storage</text>
    <text x="1050" y="872" font-size="12">ğŸ“¦ Container</text>
    <text x="1140" y="872" font-size="12">ğŸŒ IP Address</text>
  </g>
</svg>